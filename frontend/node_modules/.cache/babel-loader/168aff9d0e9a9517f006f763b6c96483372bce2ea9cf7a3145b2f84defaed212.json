{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\RHYTHMIC ZONE\\\\spotiee\\\\frontend\\\\src\\\\components\\\\webcamExpression.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport * as faceapi from 'face-api.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction WebcamExpression({\n  onEmotionDetected\n}) {\n  _s();\n  const videoRef = useRef();\n  const canvasRef = useRef();\n  const intervalRef = useRef();\n  const [modelsLoaded, setModelsLoaded] = useState(false);\n  const [isDetecting, setIsDetecting] = useState(false);\n  const [detectionCount, setDetectionCount] = useState(0);\n  const [confidence, setConfidence] = useState(0);\n  useEffect(() => {\n    const loadModels = async () => {\n      try {\n        await faceapi.nets.tinyFaceDetector.loadFromUri('/models');\n        await faceapi.nets.faceExpressionNet.loadFromUri('/models');\n        setModelsLoaded(true);\n        startVideo();\n      } catch (error) {\n        console.error('Error loading models:', error);\n      }\n    };\n    loadModels();\n\n    // Cleanup interval on unmount\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n  const startVideo = () => {\n    navigator.mediaDevices.getUserMedia({\n      video: {}\n    }).then(stream => {\n      if (videoRef.current) {\n        videoRef.current.srcObject = stream;\n      }\n    }).catch(err => console.error('Error accessing webcam:', err));\n  };\n  const handleVideoPlay = () => {\n    if (!modelsLoaded || isDetecting) return;\n    setIsDetecting(true);\n    let emotionCounts = {};\n    let totalDetections = 0;\n    intervalRef.current = setInterval(async () => {\n      if (videoRef.current && canvasRef.current) {\n        try {\n          const detections = await faceapi.detectAllFaces(videoRef.current, new faceapi.TinyFaceDetectorOptions()).withFaceExpressions();\n          if (detections.length > 0) {\n            const expressions = detections[0].expressions;\n            const maxExpression = Object.keys(expressions).reduce((a, b) => expressions[a] > expressions[b] ? a : b);\n            const maxConfidence = expressions[maxExpression];\n\n            // Only consider emotions with confidence > 0.3\n            if (maxConfidence > 0.3) {\n              emotionCounts[maxExpression] = (emotionCounts[maxExpression] || 0) + 1;\n              totalDetections++;\n              setConfidence(maxConfidence);\n\n              // After 5 detections, determine the most frequent emotion\n              if (totalDetections >= 5) {\n                const mostFrequentEmotion = Object.keys(emotionCounts).reduce((a, b) => emotionCounts[a] > emotionCounts[b] ? a : b);\n                onEmotionDetected(mostFrequentEmotion);\n                setDetectionCount(totalDetections);\n                clearInterval(intervalRef.current);\n                setIsDetecting(false);\n              }\n            }\n\n            // Draw on canvas\n            const canvas = canvasRef.current;\n            const displaySize = {\n              width: videoRef.current.videoWidth,\n              height: videoRef.current.videoHeight\n            };\n            faceapi.matchDimensions(canvas, displaySize);\n            const resizedDetections = faceapi.resizeResults(detections, displaySize);\n            canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\n            faceapi.draw.drawDetections(canvas, resizedDetections);\n            faceapi.draw.drawFaceExpressions(canvas, resizedDetections);\n          }\n        } catch (error) {\n          console.error('Detection error:', error);\n        }\n      }\n    }, 500); // Faster detection for better responsiveness\n  };\n  const resetDetection = () => {\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n    setIsDetecting(false);\n    setDetectionCount(0);\n    setConfidence(0);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative inline-block mb-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative rounded-xl overflow-hidden shadow-lg border-4 border-blue-300\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          autoPlay: true,\n          muted: true,\n          width: \"640\",\n          height: \"480\",\n          onPlay: handleVideoPlay,\n          className: \"block\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: canvasRef,\n          className: \"absolute top-0 left-0 pointer-events-none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-white rounded-full px-md py-xs shadow-md border border-gray-200\",\n        children: [!modelsLoaded && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-gray-600\",\n          children: \"Loading AI models...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this), modelsLoaded && !isDetecting && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-green-600 font-medium\",\n          children: \"Ready to detect\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this), isDetecting && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-sm text-blue-600 font-medium\",\n          children: \"Analyzing...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-md\",\n      children: [!modelsLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center gap-sm text-gray-600\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Loading face detection models...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this), modelsLoaded && !isDetecting && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center gap-sm text-green-600 font-semibold\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-lg\",\n            children: \"\\uD83D\\uDCF9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Camera ready! Look at the camera to detect your expression\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetDetection,\n          className: \"btn btn-secondary btn-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\uD83D\\uDD04\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this), \"Reset Detection\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this), isDetecting && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center gap-sm text-blue-600 font-semibold\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-lg\",\n            children: \"\\uD83D\\uDD0D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Detecting emotion... (\", detectionCount, \"/5)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-64 mx-auto\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-200 rounded-full h-2 overflow-hidden\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-gradient-to-r from-blue-500 to-indigo-600 h-full transition-all duration-300 ease-out\",\n              style: {\n                width: `${detectionCount / 5 * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }, this), confidence > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600\",\n          children: [\"Confidence: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: [(confidence * 100).toFixed(1), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-lg p-md bg-gray-50 rounded-lg border border-gray-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"font-semibold text-gray-800 mb-sm\",\n        children: \"How it works:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"text-sm text-gray-600 space-y-xs text-left max-w-md mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 Position your face in the camera view\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 The AI will analyze your facial expressions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 After 5 successful detections, your emotion will be identified\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"\\u2022 Perfect playlists will be recommended based on your mood\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n}\n_s(WebcamExpression, \"jp335zoEsceFzGKxLQw3ROOgJE8=\");\n_c = WebcamExpression;\nexport default WebcamExpression;\nvar _c;\n$RefreshReg$(_c, \"WebcamExpression\");","map":{"version":3,"names":["React","useRef","useEffect","useState","faceapi","jsxDEV","_jsxDEV","WebcamExpression","onEmotionDetected","_s","videoRef","canvasRef","intervalRef","modelsLoaded","setModelsLoaded","isDetecting","setIsDetecting","detectionCount","setDetectionCount","confidence","setConfidence","loadModels","nets","tinyFaceDetector","loadFromUri","faceExpressionNet","startVideo","error","console","current","clearInterval","navigator","mediaDevices","getUserMedia","video","then","stream","srcObject","catch","err","handleVideoPlay","emotionCounts","totalDetections","setInterval","detections","detectAllFaces","TinyFaceDetectorOptions","withFaceExpressions","length","expressions","maxExpression","Object","keys","reduce","a","b","maxConfidence","mostFrequentEmotion","canvas","displaySize","width","videoWidth","height","videoHeight","matchDimensions","resizedDetections","resizeResults","getContext","clearRect","draw","drawDetections","drawFaceExpressions","resetDetection","className","children","ref","autoPlay","muted","onPlay","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/RHYTHMIC ZONE/spotiee/frontend/src/components/webcamExpression.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport * as faceapi from 'face-api.js';\r\n\r\nfunction WebcamExpression({ onEmotionDetected }) {\r\n  const videoRef = useRef();\r\n  const canvasRef = useRef();\r\n  const intervalRef = useRef();\r\n  const [modelsLoaded, setModelsLoaded] = useState(false);\r\n  const [isDetecting, setIsDetecting] = useState(false);\r\n  const [detectionCount, setDetectionCount] = useState(0);\r\n  const [confidence, setConfidence] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const loadModels = async () => {\r\n      try {\r\n        await faceapi.nets.tinyFaceDetector.loadFromUri('/models');\r\n        await faceapi.nets.faceExpressionNet.loadFromUri('/models');\r\n        setModelsLoaded(true);\r\n        startVideo();\r\n      } catch (error) {\r\n        console.error('Error loading models:', error);\r\n      }\r\n    };\r\n\r\n    loadModels();\r\n\r\n    // Cleanup interval on unmount\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const startVideo = () => {\r\n    navigator.mediaDevices.getUserMedia({ video: {} })\r\n      .then((stream) => {\r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = stream;\r\n        }\r\n      })\r\n      .catch(err => console.error('Error accessing webcam:', err));\r\n  };\r\n\r\n  const handleVideoPlay = () => {\r\n    if (!modelsLoaded || isDetecting) return;\r\n\r\n    setIsDetecting(true);\r\n    let emotionCounts = {};\r\n    let totalDetections = 0;\r\n\r\n    intervalRef.current = setInterval(async () => {\r\n      if (videoRef.current && canvasRef.current) {\r\n        try {\r\n          const detections = await faceapi\r\n            .detectAllFaces(videoRef.current, new faceapi.TinyFaceDetectorOptions())\r\n            .withFaceExpressions();\r\n\r\n          if (detections.length > 0) {\r\n            const expressions = detections[0].expressions;\r\n            const maxExpression = Object.keys(expressions).reduce((a, b) => \r\n              expressions[a] > expressions[b] ? a : b\r\n            );\r\n            \r\n            const maxConfidence = expressions[maxExpression];\r\n            \r\n            // Only consider emotions with confidence > 0.3\r\n            if (maxConfidence > 0.3) {\r\n              emotionCounts[maxExpression] = (emotionCounts[maxExpression] || 0) + 1;\r\n              totalDetections++;\r\n              setConfidence(maxConfidence);\r\n              \r\n              // After 5 detections, determine the most frequent emotion\r\n              if (totalDetections >= 5) {\r\n                const mostFrequentEmotion = Object.keys(emotionCounts).reduce((a, b) => \r\n                  emotionCounts[a] > emotionCounts[b] ? a : b\r\n                );\r\n                onEmotionDetected(mostFrequentEmotion);\r\n                setDetectionCount(totalDetections);\r\n                clearInterval(intervalRef.current);\r\n                setIsDetecting(false);\r\n              }\r\n            }\r\n\r\n            // Draw on canvas\r\n            const canvas = canvasRef.current;\r\n            const displaySize = { width: videoRef.current.videoWidth, height: videoRef.current.videoHeight };\r\n            faceapi.matchDimensions(canvas, displaySize);\r\n            const resizedDetections = faceapi.resizeResults(detections, displaySize);\r\n            canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\r\n            faceapi.draw.drawDetections(canvas, resizedDetections);\r\n            faceapi.draw.drawFaceExpressions(canvas, resizedDetections);\r\n          }\r\n        } catch (error) {\r\n          console.error('Detection error:', error);\r\n        }\r\n      }\r\n    }, 500); // Faster detection for better responsiveness\r\n  };\r\n\r\n  const resetDetection = () => {\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n    }\r\n    setIsDetecting(false);\r\n    setDetectionCount(0);\r\n    setConfidence(0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"text-center\">\r\n      {/* Video Container */}\r\n      <div className=\"relative inline-block mb-lg\">\r\n        <div className=\"relative rounded-xl overflow-hidden shadow-lg border-4 border-blue-300\">\r\n          <video\r\n            ref={videoRef}\r\n            autoPlay\r\n            muted\r\n            width=\"640\"\r\n            height=\"480\"\r\n            onPlay={handleVideoPlay}\r\n            className=\"block\"\r\n          />\r\n          <canvas \r\n            ref={canvasRef} \r\n            className=\"absolute top-0 left-0 pointer-events-none\"\r\n          />\r\n        </div>\r\n        \r\n        {/* Overlay Status */}\r\n        <div className=\"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-white rounded-full px-md py-xs shadow-md border border-gray-200\">\r\n          {!modelsLoaded && (\r\n            <span className=\"text-sm text-gray-600\">Loading AI models...</span>\r\n          )}\r\n          {modelsLoaded && !isDetecting && (\r\n            <span className=\"text-sm text-green-600 font-medium\">Ready to detect</span>\r\n          )}\r\n          {isDetecting && (\r\n            <span className=\"text-sm text-blue-600 font-medium\">Analyzing...</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Status Messages */}\r\n      <div className=\"space-y-md\">\r\n        {!modelsLoaded && (\r\n          <div className=\"flex items-center justify-center gap-sm text-gray-600\">\r\n            <div className=\"spinner\"></div>\r\n            <span>Loading face detection models...</span>\r\n          </div>\r\n        )}\r\n        \r\n        {modelsLoaded && !isDetecting && (\r\n          <div className=\"space-y-sm\">\r\n            <div className=\"flex items-center justify-center gap-sm text-green-600 font-semibold\">\r\n              <span className=\"text-lg\">📹</span>\r\n              <span>Camera ready! Look at the camera to detect your expression</span>\r\n            </div>\r\n            <button \r\n              onClick={resetDetection}\r\n              className=\"btn btn-secondary btn-sm\"\r\n            >\r\n              <span>🔄</span>\r\n              Reset Detection\r\n            </button>\r\n          </div>\r\n        )}\r\n        \r\n        {isDetecting && (\r\n          <div className=\"space-y-sm\">\r\n            <div className=\"flex items-center justify-center gap-sm text-blue-600 font-semibold\">\r\n              <span className=\"text-lg\">🔍</span>\r\n              <span>Detecting emotion... ({detectionCount}/5)</span>\r\n            </div>\r\n            \r\n            {/* Progress Bar */}\r\n            <div className=\"w-64 mx-auto\">\r\n              <div className=\"bg-gray-200 rounded-full h-2 overflow-hidden\">\r\n                <div \r\n                  className=\"bg-gradient-to-r from-blue-500 to-indigo-600 h-full transition-all duration-300 ease-out\"\r\n                  style={{ width: `${(detectionCount / 5) * 100}%` }}\r\n                ></div>\r\n              </div>\r\n            </div>\r\n            \r\n            {confidence > 0 && (\r\n              <p className=\"text-sm text-gray-600\">\r\n                Confidence: <span className=\"font-semibold\">{(confidence * 100).toFixed(1)}%</span>\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Instructions */}\r\n      <div className=\"mt-lg p-md bg-gray-50 rounded-lg border border-gray-200\">\r\n        <h4 className=\"font-semibold text-gray-800 mb-sm\">How it works:</h4>\r\n        <ul className=\"text-sm text-gray-600 space-y-xs text-left max-w-md mx-auto\">\r\n          <li>• Position your face in the camera view</li>\r\n          <li>• The AI will analyze your facial expressions</li>\r\n          <li>• After 5 successful detections, your emotion will be identified</li>\r\n          <li>• Perfect playlists will be recommended based on your mood</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WebcamExpression;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}